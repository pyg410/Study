## 중복 코드

중복코드는 구린내의 제왕이라고 한다.ㅋㅋ

똑같은 코드 구조가 두 군데 이상 있을 때는 해당 부분을 하나로 통일하면 프로그램이 개선된다.

### 1. 한 클래스의 두 메서드 안에 같은 코드가 들어있는 경우

메서드 추출(Extract Method)기법을 적용하면 된다.

겹치는 코드를 빼내어 별도의 메서드로 만든다.

그 후 그 메서드를 두 곳에서 호출하면 된다.

### 2-1. 한 클래스의 두 하위 클래스에 같은 코드가 들어 있는 경우

1. 메서드 추출(Extract Method) 기법을 적용해서 중복을 없앤다.
2. 메서드 상향(Pull Up Method) 기법을 적용한다.

### 2-2. 코드가 똑같지 않고 비슷한 경우

1. 메서드 추출(Extract Method) 기법을 적용해서 같은 부분과 다른 부분을 분리한다.
2. 템플릿 메서드 형성(Form Template Method) 기법을 적용한다.

### 3. 두 메서드가 알고리즘만 다르고 기능이 같은 경우

1. 두 알고리즘 중에서 더 간단한 것을 택한다.
2. 알고리즘 전환(Substitue Algorithm)기법을 적용한다.

### 4. 중복 코드가 메서드 가운데 있는 경우

1. 주변 메서드 추출(Extract Surrounding Method)기법을 적용한다.

### 5. 서로 상관없는 두 클래스 안에 중복코드가 있는 경우

1. 한 클래스 안의 중복 코드를 클래스 추출(Extract Class)하거나 모듈 추출(Extract Module)을 적용한다.
2. 제 3의 클래스나 모듈로 떼어낸 후 그것을 다른 클래스에서 호출한다.

1. 중복코드를 빼서 메서드로 만든다.
2. 그 메서드를 두 클래스 중 하나에 넣고 다른 클래스에서 그 메서드를 호출하거나, 코드를 빼내어 만든 메서드를 제 3의 클래스에 넣고 그걸 두 클래스에서 호출한다.

## 장황한 메서드

최적의 상태로 장수하는 객체 프로그램을 보면 공통적으로 메서드의 길이가 짧다.

나도 책을 읽으며 고민했던 부분인데, OOP로 작성된 프로그램을 보면 기능이 거의 없는 메서드가 서로 끊임없이 위임하는게 (의미없다고 생각될 정도로) 아닌가 싶은 생각이 들 때도 있다.

하지만, 시간이 지나면서 유지보수나 새로운 기능을 추가할 때 이러한 작은 메서드의 중요성을 실감했다.

나도 포함해서 보통의 사람들은 프로시저가 길수록 이해하기 어렵다는 점을 안다.

하지만 하위 루틴을 호출 할 때 오버헤드가 수반되기 때문에 짧은 메서드를 본능적으로 기피하게 된다.

물론 현대의 객체지향 언어는 프로세스 내부 호출에 따른 오버헤드가 현저히 줄었지만, 

이제 하위 프로시저의 기능을 알려면 환경 전환을 해야하므로(기능을 이해하기 위해 메서드를 따라 내려가서 읽어야 하는 경우) 

코드를 보고 이해하려는 사람들의 머릿 속에 오버헤드가 생겼다. ㅋㅋ

다들 이해할 것이다. 간단하게 Spring의 내부 코드만 보더라도, 하나의 기능을 이해하기 위해 수많은 메서드를 따라 내려가야 한다. 그러다보면 내가 무슨 기능을 이해하려 이 메서드를 보고 있는지 목적을 잊게 된다.

즉, 여기서 말하고 싶은 이야기는 **짧은 메서드를 이해하기 쉽게 하려면 메서드 명을 잘 정해야 한다**.

메서드 명을 한눈에 알 수 있게 작성하면 메서드 안의 코드를 분석하지 않아도 된다.

이를 위해서는 메서드를 훨씬 과감하게 쪼개야 한다.

메서드 명은 아래와 같이 작성해야 한다.

> 메서드 명은 기능 수행방식이 아닌, 목적(기능 자체)을 나타내는 이름으로 정한다.

이제 메서드를 과감하게 쪼개는 기준에 대해 설명해보자
### 1. 메서드를 줄이자

메서드를 줄이려면 십중팔구 메서드 추출(Extract Method)기법을 사용해야 한다.

### 2. 메서드에 매개변수와 임시변수가 많은 경우

이런 경우 메서드 추출을 하기 힘들다.

그렇다면 매개변수와 임시변수를 제거해야 한다.

아래는 그 방법에 대해 설명한다.

1. 임시변수를 메서드 호출로 전환(Replace Temp with Query)기법이나 임시변수를 메서드 체인으로 전환(Replace Temp with Chain)기법을 적용하면 임시변수가 제거된다.

2. 길게 열거된 매개변수는 매개변수 세트를 객체로 전환(Introduce Parameter Object)기법과 객체를 통째로 전달(Preserve Whole Object) 기법을 적용한다.

위의 방법들을 적용했음애도 임시변수와 매개변수가 많은 경우 3번 방법을 이용한다.

3. 메서드를 메서드 객체로 전환(Replace Method with Method Object)기법을 적용한다.

### 3. 코드를 여러 덩어리로 분리하기 위한 방법

1. 주석을 찾는다.
2. 기능 설명이 주석으로 처리된 코드 구간을 메서드로 만든다.
3. 메서드 명은 주석에 설명된 기능을 참고해서 정한다.

### 4. 조건문과 루프를 메서드로 뺀다.

1. 조건문은 조건문 쪼개기(Decompose Conditional)기법을 사용한다.

2. 루프를 컬렉션 클로저 메서드로 전환(Replace Loop with Collection Closure Method)기법을 실시 한 후 클로저 메서드 호출과 클로저 자체에 메서드 추출(Extract Method)기법을 실시한다.

## 방대한 클래스

